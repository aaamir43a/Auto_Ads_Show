<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Double Network Ads Show</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1f1c2c, #928dab);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            text-align: center;
            background: linear-gradient(to right, #232526, #414345);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
            width: 320px;
        }

        .container h1 {
            font-size: 24px;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .developer {
            font-size: 13px;
            background: linear-gradient(45deg, #11998e, #38ef7d);
            padding: 6px 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: inline-block;
            color: #fff;
            font-weight: bold;
            box-shadow: 0 3px 0 #0e6b5f;
            cursor: pointer;
        }

        .network-switches {
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            margin-bottom: 15px;
            background: rgba(0,0,0,0.2);
            padding: 8px 0;
            border-radius: 10px;
        }
        .switch-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .switch-container span {
            font-size: 14px;
            font-weight: bold;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s; border-radius: 24px;
        }
        .slider:before {
            position: absolute; content: ""; height: 18px; width: 18px; left: 3px;
            bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(20px); }

        .input-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px; /* ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ */
        }
        .input-container label {
            font-size: 14px;
            font-weight: bold;
        }
        #ads-per-network-input {
            width: 50px;
            height: 25px;
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid #fff;
            border-radius: 5px;
            color: #fff;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
        }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        .stats p, .user-info p { font-size: 15px; margin: 6px 0; }
        .display-area {
            position: relative; display: flex; justify-content: center;
            align-items: center; height: 100px; margin: 15px auto;
        }
        #network-indicator {
            position: absolute; left: 25px; top: 50%; transform: translateY(-50%);
            width: 50px; height: 50px; border: 2px solid; border-radius: 10px;
            display: flex; justify-content: center; align-items: center;
            font-size: 32px; font-weight: bold; transition: color 0.3s ease, border-color 0.3s ease;
        }
        .g-style { color: #43cea2; border-color: #43cea2; }
        .m-style { color: #ffeb3b; border-color: #ffeb3b; }
        .progress-container {
            position: relative; width: 100px; height: 100px; margin: 0; 
        }
        .progress-svg {
            position: absolute; top: 0; left: 0; width: 100%;
            height: 100%; transform: rotate(-90deg);
        }
        .progress-circle-track {
            fill: none; stroke-width: 8; stroke: #ff9800; opacity: 0.3;
        }
        #green-progress {
            fill: none; stroke-width: 8; stroke: #00ff00;
            stroke-linecap: round; transition: stroke-dashoffset 0.5s ease;
        }
        .progress-text-container {
            position: absolute; width: 100%; height: 100%; display: flex;
            justify-content: center; align-items: center;
        }
        #ads-progress {
            font-size: 18px; font-weight: bold; color: #ffeb3b;
        }
        .buttons button {
            width: 90%; margin: 8px 0; padding: 12px; font-size: 15px;
            border: none; border-radius: 8px; font-weight: bold;
            background: linear-gradient(to bottom, #43cea2, #185a9d);
            color: white; box-shadow: 0 5px 0 #0e4c7d; transition: all 0.2s ease; cursor: pointer;
        }
        .buttons button:hover {
            transform: translateY(-2px); background: linear-gradient(to bottom, #f7971e, #ffd200);
            box-shadow: 0 7px 0 #d17d00;
        }
        .buttons button:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>

<body>
    <div class="container">
        <h1>Auto Ads Show Bot</h1>
        <div class="developer" onclick="window.location.href='https://t.me/amir47812'">Developer by Amir Hossain</div>
        
        <!-- ‚òÖ‚òÖ‚òÖ ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®: ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶∏‡¶∞‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‚òÖ‚òÖ‚òÖ -->
        <div class="network-switches">
            <div class="switch-container">
                <span style="color:#43cea2">GigaPub</span>
                <label class="switch">
                    <input type="checkbox" id="giga-switch" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="switch-container">
                <span style="color:#ffeb3b">Monetag</span>
                <label class="switch">
                    <input type="checkbox" id="libtl-switch" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="input-container">
            <label for="ads-per-network-input">Ads per Switch:</label>
            <input type="number" id="ads-per-network-input" value="5" min="1">
        </div>

        <div class="user-info"><p>Welcome, <span id="user-name"></span></p></div>
        <div class="stats"><p>Watched Ads: <span id="watched-ads">0</span></p></div>

        <div class="display-area">
            <div id="network-indicator"></div>
            <div class="progress-container">
                <svg class="progress-svg" viewBox="0 0 100 100">
                    <circle class="progress-circle-track" cx="50" cy="50" r="45"></circle>
                    <circle id="green-progress" cx="50" cy="50" r="45"></circle>
                </svg>
                <div class="progress-text-container">
                    <span id="ads-progress">0%</span>
                </div>
            </div>
        </div>
        
        <div class="buttons">
            <button id="watch-ad-btn" onclick="manualWatchAd()">üé¨ Watch Ads</button>
            <button id="auto-ad-btn" onclick="startAutoAds()">‚öôÔ∏è Auto Show Ads</button>
            <button id="stop-auto-btn" onclick="stopAutoAds()" disabled>‚õî Stop Auto Ads</button>
        </div>
    </div>
    
    <script src="https://ad.gigapub.tech/script?id=2364"></script>
    <script src='//libtl.com/sdk.js' data-zone='9646545' data-sdk='show_9646545'></script>

    <script>
        // --- ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶ï‡ßã‡¶° ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶Ü‡¶õ‡ßá, ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡¶ø‡¶≤ ---
        let watchedAdsCount = 0;
        let isAutoAdsRunning = false;
        let autoAdTimeout;

        let currentAdNetwork = 'giga';
        let adsShownForCurrentNetwork = 0;
        
        let isGigaActive = true;
        let isLibTLActive = true;
        let gigaSwitch, libtlSwitch, adsPerNetworkInput;
        
        function handleSuccessfulAdView() {
            checkAndResetCounter();
            watchedAdsCount++;
            adsShownForCurrentNetwork++;

            localStorage.setItem('watchedAdsCount', watchedAdsCount);
            localStorage.setItem('lastAdDate', new Date().toISOString().slice(0, 10));
            updateUI();

            let switchThreshold = parseInt(adsPerNetworkInput.value, 10);
            if (isNaN(switchThreshold) || switchThreshold < 1) {
                switchThreshold = 1;
            }

            if (adsShownForCurrentNetwork >= switchThreshold) {
                if (currentAdNetwork === 'giga' && isLibTLActive) {
                    currentAdNetwork = 'libtl';
                } else if (currentAdNetwork === 'libtl' && isGigaActive) {
                    currentAdNetwork = 'giga';
                }
                adsShownForCurrentNetwork = 0;
            }
            updateNetworkIndicator();
        }

        document.addEventListener('DOMContentLoaded', () => {
            setUserName();
            checkAndResetCounter();
            
            gigaSwitch = document.getElementById('giga-switch');
            libtlSwitch = document.getElementById('libtl-switch');
            adsPerNetworkInput = document.getElementById('ads-per-network-input');

            gigaSwitch.addEventListener('change', handleGigaSwitch);
            libtlSwitch.addEventListener('change', handleLibtlSwitch);

            updateUI();
            updateNetworkIndicator();
        });
        
        function updateUI() {
            document.getElementById('watched-ads').textContent = watchedAdsCount;
            updateProgressCircle();
        }
        function updateProgressCircle() {
            const textPercent = Math.floor(watchedAdsCount / 10);
            document.getElementById('ads-progress').textContent = `${textPercent}%`;
            const greenProgressElement = document.getElementById('green-progress');
            const radius = greenProgressElement.r.baseVal.value;
            const circumference = 2 * Math.PI * radius;
            const progress = Math.min(watchedAdsCount / 1000, 1);
            const offset = circumference * (1 - progress);
            greenProgressElement.style.strokeDasharray = circumference;
            greenProgressElement.style.strokeDashoffset = offset;
        }
        function watchAd() {
            return new Promise((resolve, reject) => {
                if (currentAdNetwork === 'giga' && !isGigaActive) {
                    currentAdNetwork = 'libtl'; updateNetworkIndicator();
                } else if (currentAdNetwork === 'libtl' && !isLibTLActive) {
                    currentAdNetwork = 'giga'; updateNetworkIndicator();
                }
                if (currentAdNetwork === 'giga' && isGigaActive) {
                    if (typeof window.showGiga === 'function') window.showGiga().then(resolve).catch(reject);
                    else reject("GigaPub function not available.");
                } else if (currentAdNetwork === 'libtl' && isLibTLActive) {
                    if (typeof window.show_9646545 === 'function') window.show_9646545().then(resolve).catch(reject);
                    else reject("TeleLib function not available.");
                } else reject("No active ad network available.");
            });
        }
        function handleGigaSwitch() {
            if (!gigaSwitch.checked && !isLibTLActive) {
                gigaSwitch.checked = true; alert("At least one ad network must be active!");
            } else isGigaActive = gigaSwitch.checked;
        }
        function handleLibtlSwitch() {
            if (!libtlSwitch.checked && !isGigaActive) {
                libtlSwitch.checked = true; alert("At least one ad network must be active!");
            } else isLibTLActive = libtlSwitch.checked;
        }
        function updateNetworkIndicator() {
            const indicator = document.getElementById('network-indicator');
            if (currentAdNetwork === 'giga') {
                indicator.textContent = 'G'; indicator.classList.remove('m-style'); indicator.classList.add('g-style');
            } else { 
                indicator.textContent = 'M'; indicator.classList.remove('g-style'); indicator.classList.add('m-style');
            }
        }
        function setUserName() {
            const userNameSpan = document.getElementById("user-name");
            try {
                const tg = window.Telegram.WebApp; const user = tg.initDataUnsafe.user;
                if (user && user.first_name) userNameSpan.textContent = `${user.first_name} ${user.last_name || ''}`.trim();
                else userNameSpan.textContent = "Guest";
            } catch (error) { userNameSpan.textContent = "@exampleUser"; }
        }
        function checkAndResetCounter() {
            const todayUTC = new Date().toISOString().slice(0, 10);
            const lastVisitUTC = localStorage.getItem('lastAdDate');
            if (lastVisitUTC !== todayUTC) {
                watchedAdsCount = 0; localStorage.setItem('watchedAdsCount', '0'); localStorage.setItem('lastAdDate', todayUTC);
            } else watchedAdsCount = parseInt(localStorage.getItem('watchedAdsCount')) || 0;
        }
        function manualWatchAd() {
            const watchBtn = document.getElementById('watch-ad-btn'); watchBtn.disabled = true;
            watchAd().then(() => { handleSuccessfulAdView(); }).catch(error => { console.error("Manual ad watch failed:", error); alert("Ad could not be loaded."); }).finally(() => { watchBtn.disabled = false; });
        }
        function autoAdLoop() {
            if (!isAutoAdsRunning) return;
            watchAd().then(() => { handleSuccessfulAdView(); if (isAutoAdsRunning) autoAdTimeout = setTimeout(autoAdLoop, 2000); })
                .catch(error => { console.error("Auto ad failed:", error); if (isAutoAdsRunning) autoAdTimeout = setTimeout(autoAdLoop, 2000); });
        }
        function startAutoAds() {
            if (isAutoAdsRunning) return; isAutoAdsRunning = true;
            document.getElementById('auto-ad-btn').disabled = true;
            document.getElementById('stop-auto-btn').disabled = false;
            document.getElementById('watch-ad-btn').disabled = true;
            autoAdLoop();
        }
        function stopAutoAds() {
            isAutoAdsRunning = false; clearTimeout(autoAdTimeout);
            document.getElementById('auto-ad-btn').disabled = false;
            document.getElementById('stop-auto-btn').disabled = true;
            document.getElementById('watch-ad-btn').disabled = false;
        }
    </script>
</body>
</html>